 // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ (/start, /hi)
 const { getRandomItem } = require('../utils/helpers');
 const weatherService = require('../services/weatherService');

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start
function handleStart(userName) {
  return `–ó–¥–∞—Ä–æ–≤–∞ –µ–±–∞—Ç—å, ${userName}! üöÄ –Ø —Ç–≤–æ–π –±—Ä–∞—Ç–∏—à–∫–∞ –≤ —ç—Ç–æ–º —á–∞—Ç–µ!\n\n` +
         `–ú–Ω–æ–≥–æ –ø–∏–∑–¥–µ—Ç—å –Ω–µ –±—É–¥—É, –Ω–æ –∏ –º–æ–ª—á–∞—Ç—å –Ω–µ —Å–æ–±–∏—Ä–∞—é—Å—å!\n\n` +
         `–ü—Ä–∏–¥—ë—Ç—Å—è –º–µ–Ω—è –ø–æ—Ç–µ—Ä–ø–µ—Ç—å, –ø–æ–∫–∞ –ñ–µ–∫–∞ –ì–æ—Ä–ª–æ–≤–æ–π –º–µ–Ω—è –Ω–∞—É—á–∏—Ç —á–µ–º—É-—Ç–æ —Ç–æ–ª–∫–æ–≤–æ–º—É!\n\n` +
         `‚úåÔ∏è –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n` +
         `/hi - –ø–æ—à–ª—é –∫–æ–≥–æ-–Ω–∏–±—É–¥—å –Ω–∞—Ö—É–π\n` +
         `/weather - –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –≤ –°–∞–º–∞—Ä–µ\n` +
         `/weather + [—Ç–≤–æ–π –≥–æ—Ä–æ–¥] - –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã –≤ [—Ç–≤–æ—ë–º –≥–æ—Ä–æ–¥–µ]\n\n` +
         `–ö–∏–Ω—å –º–Ω–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∏–ª—Å –∏–∑ –∏–Ω—Å—Ç—ã - —è –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é –µ—ë –¥–ª—è —Ç–≥ ‚úî`;
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /hi
function handleHi(userName) {
  return `–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è, ${userName}!\n–∏ –∏–¥–∏ –Ω–∞—Ö—É–π! üëå`;
}

// –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π –ø–æ–≥–æ–¥—ã
async function handleWeather(userName, city = '–°–∞–º–∞—Ä–∞') {
  try {
    const weather = await weatherService.getCurrentWeather(city);
    
    return `üå§Ô∏è –í –≥–æ—Ä–æ–¥–µ ${weather.city} —Å–µ–π—á–∞—Å:\n\n` +
           `üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: ${weather.temperature}¬∞C\n` +
           `ü§∑‚Äç‚ôÇÔ∏è(–æ—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ ${weather.feelsLike}¬∞C)\n` +
           `üíß –í–ª–∞–∂–Ω–æ—Å—Ç—å: ${weather.humidity}%\n` +
           `üí® –í–µ—Ç–µ—Ä: ${weather.windSpeed} –º/—Å\n\n` +
           `–•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è, ${userName}! üçª`;
  } catch (error) {
    return `‚ùå ${error.message}\n\n–ü–æ–ø—Ä–æ–±—É–π: /weather –°–∞–º–∞—Ä–∞`;
  }
}

module.exports = {
  handleStart,
  handleHi,
  handleWeather
};