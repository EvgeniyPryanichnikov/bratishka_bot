// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
const { getRandomItem } = require('../utils/helpers');

// –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
const responses = {
  –ø–æ–≥–æ–¥–∞: [
    { text: '–°–µ–π—á–∞—Å –≥–ª—è–Ω—É —á—Ç–æ —Ç–∞–º –ø–æ –ø–æ–≥–æ–¥–µ... üå§Ô∏è', action: 'getWeather' }
  ],

  –ø–∏–≤–æ: [
    '—è —Ç–æ–ª—å–∫–æ –ø–æ–¥—É–º–∞–ª –æ –ø–∏–≤–µ –∏ —Ç—É—Ç –Ω–∞ –Ω–∞—Ö—É–π!',
    '–ø–µ–π –ø–∏–≤–æ –ø–µ–Ω–Ω–æ–µ ‚Äî –±—É–¥–µ—Ç –∂–∏–∑–Ω—å –æ—Ç–º–µ–Ω–Ω–∞—è!',
    '–∫–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç –ñ–µ–∫–∞ –ì–æ—Ä–ª–æ–≤–æ–π - –°–∞–Ω—è –Ω–∞—Å–æ—Å –ø–∏–≤–Ω–æ–π)',
    '–ª—É—á—à–µ –ø–∏–≤–æ –≤ —Ä—É–∫–µ, —á–µ–º –¥–µ–≤–∏—Ü–∞ –≤–¥–∞–ª–µ–∫–µ',
    '—É —á–µ–ª–æ–≤–µ–∫–∞ –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≥–æ—Ä—è—á–µ–µ —Å–µ—Ä–¥—Ü–µ –∏ —Ö–æ–ª–æ–¥–Ω–æ–µ –ø–∏–≤–æ!',
  ],

  –∫—Ä–µ–º–ø–∞–π: [
    '–Ø –∏ –µ—Å—Ç—å –∫—Ä–µ–º–ø–∞–π!',
    '–≠—Ç–æ –º–æ—ë –∏–º—è, –∏–º–µ–π —É–≤–∞–∂–µ–Ω–∏–µ',
    '–Ω—É —á–µ–≥–æ –µ–±–∞—Ç—å?'
  ],

  —Å–µ—Ä—ë–≥–∞: [
    '–¢—Ä–æ—Ñ–∏–º –∫–æ–Ω–µ—á–Ω–æ –ª–µ–≥–µ–Ω–¥–∞..'
  ],

  –≥–µ–ª–ª–µ—Ä—Ç: [
    '–ì–µ–ª–ª–µ—Ä—Ç –∫–æ–Ω–µ—á–Ω–æ –¥–ª—è –ø–µ—Ç—É—Ö–æ–≤, –Ω–æ –º–æ–∂–Ω–æ –∏ —Å–≥–æ–Ω—è—Ç—å –Ω–∞ –ø–∞—Ä—É –∫—Ä—É–∂–µ–∫',
    '–±–ª—è, –∫–∞–∫ –≤–∞—Å –Ω–µ –∑–∞–µ–±–∞–ª –µ—â—ë —ç—Ç–æ—Ç –≥–µ–ª–ª–µ—Ä—Ç',
    '–∫—Å—Ç–∞—Ç–∏, —É –°–∞–Ω–∏ –≤ –≥–µ–ª–ª–µ—Ä—Ç–µ –ø–æ –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞–º –æ–¥–∏–Ω–æ–∫–∏–µ –±–∞–±—ã —Å–∏–¥—è—Ç',
    '—á—Ç–æ-—Ç–æ —Ç–æ–∂–µ –∑–∞—Ö–æ—Ç–µ–ª–æ—Å—å –≤ –ì–µ–ª–ª–µ—Ä—Ç...',
  ],

  ['–∏ —Ö—É–ª–∏']: [
    '–ê –±–ª—è, —Å–æ—Ä—è–Ω –ø–∞—Ü–∞–Ω—ã! –ø–æ–∫–∞ –≤—ã –≤—Å–µ –ø—Ä–æ–µ–±–∞–ª–∏—Å—å - —è –ø–æ–º–Ω—é!\nüçª—Å–µ–≥–æ–¥–Ω—è –¥—Ä —É –∫–µ–Ω—Ç–∞ –≤–∞—à–µ–≥–æ - –°–∞–Ω–∏!üçæ\n–æ–±–Ω–∏–º–∏—Ç–µ –µ–≥–æ –æ—Ç –º–µ–Ω—è –ø–æ-–∫—Ä–µ–ø—á–µ!\n–°–∞—à–∞, –∂–µ–ª–∞—é —Ç–µ–±–µ –±—ã—Ç—å —Å—á–∞—Å—Ç–ª–∏–≤—ã–º, –±–æ–≥–∞—Ç—ã–º, –µ–±–∞—Ç—å –∫—Ä–∞—Å–∏–≤–µ–π—à–∏—Ö –∂–µ–Ω—â–∏–Ω!\n–Ω–µ –∑–∞–±—ã–≤–∞–π –ª—é–±–∏—Ç—å –ø–∏–≤–æ –∏ —Å –º–æ–∏–º —Ö–æ–∑—è–∏–Ω–æ–º –ø–∏—Ç—å –ø–∏—Ä–∞—Ç—Å–∫–∏–π —Ä–æ–º!ü•É\n\n–í –æ–±—â–µ–º, –∑–∞ –Ω–∞—Å —Å –≤–∞–º–∏ –∑–∞ —Ö—É–π —Å –Ω–∏–º–∏, –≤—Å–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏ –ø–∏–¥–∞—Ä–∞—Å—ã!üòÖüë®üèº‚Äçü§ù‚Äçüë®üèº'
  ]
};

// –ü–æ–∏—Å–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ —Ç–µ–∫—Å—Ç–µ
function findKeyword(text) {
  const lowerText = text.toLowerCase();
  
  if (lowerText.includes('–ø–æ–≥–æ–¥–∞') || lowerText.includes('–ø–æ–≥–æ–¥—É') || lowerText.includes('–ø–æ–≥–æ–¥–∫–∞')) return '–ø–æ–≥–æ–¥–∞';
  if (lowerText.includes('–ø–∏–≤')) return '–ø–∏–≤–æ';
  if (lowerText.includes('–∫—Ä–µ–º–ø–∞–π')) return '–∫—Ä–µ–º–ø–∞–π';
  if (lowerText.includes('—Å–µ—Ä—ë–≥–∞') || lowerText.includes('—Å–µ—Ä') || lowerText.includes('—Ç—Ä–æ—Ñ')) return '—Å–µ—Ä—ë–≥–∞';
  if (lowerText.includes('–≥–µ–ª–ª–µ—Ä—Ç') || lowerText.includes('–≥–µ–ª') || lowerText.includes('–≥–µ–ª—è')) return '–≥–µ–ª–ª–µ—Ä—Ç';
  if (lowerText.includes('–∏ —Ö—É–ª–∏')) return '–∏ —Ö—É–ª–∏';
  
  return null;
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
function handleKeyword(keyword, userName) {
  const responseArray = responses[keyword];
  if (!responseArray) return null;

  const response = getRandomItem(responseArray);
  return keyword === '–∫—Ä–µ–º–ø–∞–π' ? `${response}, ${userName}` : response;
}

module.exports = {
  findKeyword,
  handleKeyword
};